let codeKeyWordDescriptionsData;let codeKeyWordsData;let techSkillsDescriptionsData;let _loaderDelay=65;let _loaderElementsCount=0;let _startSceneTake01=false;function waitUntilCondition(e,t){const n=setInterval(()=>{const o=e();if(o===true){clearInterval(n);t()}},100)}const nodes=[];const nodeTransition=document.getElementById("transition01");function DEBUG(e){document.getElementById("DEBUG").innerHTML+=e+"\n"}async function fetchResume(e){try{const t=await fetch(e);if(!t.ok){throw new Error("No se pudo cargar el archivo JSON.")}const n=await t.text();return n}catch(e){throw e}}async function fetchJson(e){try{const t=await fetch(e);if(!t.ok){throw new Error("No se pudo cargar el archivo JSON.")}const n=await t.json();return n}catch(e){throw e}}function hashCode(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);t+=`${o}`}return t}function delay(e,t){const n=t=>{e();t()};return new Promise(e=>{setTimeout(()=>n(e),t)})}function fireTransition(e,t,n,o,r,s){const{beforeCallback:i,onTransitionEnd:l}=s||{};const c=e;return new Promise((e,s)=>{c.addEventListener("transitionend",()=>{if(l)l(c);e()});c.addEventListener("transitioncancel",()=>{if(l)l(c);e()});setTimeout(()=>{if(i)i(c);c.style.setProperty(t,n);c.style.setProperty("transition",`none`);setTimeout(()=>{c.style.setProperty("transition",`${t} ${r}s`);c.style.setProperty(t,o)},20)},10)})}function getLine(e){const t=document.createElement("div");t.classList.add("box1");t.style.setProperty("width",0+"px");nodeTransition.appendChild(t);return t}function drawLine(e,t){const{x:n,y:o,width:r,time:s,degrees:i,color:l,backgroundImage:c}=t;setTimeout(function(){if(s!==undefined)e.style.setProperty("transition",`width ${s}s`);if(i!==undefined)e.style.setProperty("transform",`rotate(${i}deg)`);if(l!==undefined)e.style.setProperty("background-color",l);if(r!==undefined)e.style.setProperty("width",r+"px");if(c!==undefined)e.style.setProperty("background-image",c);if(o!==undefined)e.style.setProperty("top",o+"px");if(n!==undefined)e.style.setProperty("left",n+"px")},1)}let _loaderElementsEnd=0;let _loaderElementsPromises=[];function loader(e){const t=document.getElementById("screen01");_loaderElementsCount++;const n=_loaderElementsCount;window.requestAnimationFrame(()=>{const t=document.createElement("h1");nodeTransition.appendChild(t);t.innerText=n+" - "+e;t.style.position="absolute";t.style.marginLeft="auto";t.style.marginRight="auto";t.style.textAlign="center";t.style.border="1px solid white";t.style.width="100vw";t.style.display="none";t.style.fontSize="4rem";t.style.fontStyle="Inconsolata";t.style.fontVariant="monospace";t.style.backgroundColor="white";t.style.color="black";const o=_loaderElementsPromises.length||0;const r=fireTransition(t,"top",`${-o*92}vh`,"101vh",1,{beforeCallback:e=>{e.style.display=""},onTransitionEnd:e=>{nodeTransition.removeChild(e)}});r.then(()=>{}).catch(e=>{});_loaderElementsPromises.push(r)})}function getCodeKeyWordDescriptions(e){return codeKeyWordDescriptionsData[keyWord]}async function showKeyWordDescription(e){if(codeKeyWordDescriptionsData[e]){const t=new Popup({id:"keyWord",title:e,content:codeKeyWordDescriptionsData[e],backgroundColor:"#000",titleColor:"#fff",textColor:"#fff",closeColor:"#fff",borderWidth:".2em",borderColor:"#fff",linkColor:"#fff",fontSizeMultiplier:1.2,titleMargin:"4%",underlineLinks:true});t.show()}}function take01_01(){const e=document.getElementById("screen01");e.style.visibility="visible";delay(()=>take01(),2e3)}function take01(){let e=0;const t=[];for(let e=0;e<105;e++,t.push(getLine()));const n=[];for(let e=0;e<105;e++,n.push(getLine()));let o=0;let r=250;let s=Math.random()*500;let i=document.getElementById("screen01").offsetHeight;let l=document.getElementById("screen01").offsetWidth;for(var c of t){o++;drawLine(c,{x:r+o,y:-80,width:1e3,time:2,degrees:0+o*1.5,color:`rgb(${o},${o},${o})`})}o=0;for(var c of n){o++;drawLine(c,{x:700+o,y:i+120,width:1500,time:1,degrees:0-o*1.8,color:`black`})}let a=0;const d=t.concat(n);for(var c of d){c.addEventListener("transitionend",()=>{a++;if(a==210){f(c)}})}function f(e){const o=document.getElementById("screen01");screen01.innerHTML=`<div class="screen01_title">\n          <h1 id="screen01_title"><span>&#8595;</span>FullStack Developer <span>&#8595;</span></h1>\n        </div>`;for(var e of n){drawLine(e,{width:0,time:1})}for(var e of t){drawLine(e,{width:0,time:1})}let r=0;const s=t.concat(n);for(var e of s){e.addEventListener("transitionend",()=>{r++;if(r==210){delay(()=>_enTransition(e),1e3)}})}}}function _enTransition(e){const t=document.getElementById("screen01");t.style.backgroundColor="black";t.style.color="white";screen01.innerHTML=`<div class="screen01_title">\n        <h1 id="screen01_title" style="font-size:20rem">&#8595;&#x1F4BB;&#8595</h1>\n      </div>`;while(document.querySelectorAll(".box1").length>0){const e=document.querySelectorAll(".box1");e.forEach(e=>e.remove())}}document.addEventListener("DOMContentLoaded",async()=>{const e=await fetchResume("https://raw.githubusercontent.com/rfranr/resume/main/resume.md");var t=window.markdownit({html:true,xhtmlOut:false,breaks:false});var n=t.render(e);document.getElementById("lipsum").innerHTML=n;codeKeyWordDescriptionsData=await fetchJson("/layouts/resume/code-key-word-descriptions.json");codeKeyWordsData=await fetchJson("/layouts/resume/code-key-words.json");codeKeyWordsData=codeKeyWordsData.sort(function(e,t){return t.length-e.length});techSkillsDescriptionsData=await fetchJson("/layouts/resume/tech-skills-descriptions.json");replaceCodeKeyWords();document.showKeyWordDescription=showKeyWordDescription;setTimeout(function(){DEBUG(_loaderElementsPromises.length);let e=false;if(_loaderElementsPromises.length>65){DEBUG("pull2");DEBUG(_loaderElementsPromises.length);Promise.all(_loaderElementsPromises).then(()=>{delay(()=>take01_01(),1e3)}).then(()=>{e=true}).catch(t=>{e=false})}},100)});function take02(){firstScroll=true;const e=document.getElementById("transition01");e.style.setProperty("display","none");const t=document.getElementById("screen01");const n=document.getElementById("content");t.style.setProperty("height","1px");n.style.setProperty("top","1px");const o=document.querySelectorAll("div.workExperience");let r=0;for(var s of o){r++;fireTransition(s,"margin-left",`-${r*1400}px`,"0px",1.5)}n.style.setProperty("visibility","visible")}function replaceCodeKeyWords(){const e=document.getElementById("lipsum");let t=e.innerHTML;let n=0;for(let e of codeKeyWordsData){const n=new RegExp(e,"g");t=t.replace(n,`${hashCode(e)}`)}for(let e of codeKeyWordsData){const n=hashCode(e);const o=new RegExp(n,"g");t=t.replace(o,`<code onclick="showKeyWordDescription('${e}')">${e}</code>`);loader(e)}e.innerHTML=t}function take03(){delay(()=>{const e=document.querySelectorAll("code");let t=0;for(var n of e){t++;fireTransition(n,"background-color",`white`,"black",.5)}},200)}let firstScroll=undefined;window.addEventListener("wheel",function(e){if(!firstScroll){firstScroll=true;take02();delay(()=>{take03();document.body.style.overflow=""},2e3);document.body.style.overflow="hidden"}});window.addEventListener("touchmove",function(){if(!firstScroll){firstScroll=true;take02();delay(()=>take03(),2e3)}});